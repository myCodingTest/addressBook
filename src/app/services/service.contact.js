(function(){
    'use strict';

    angular.module('application.services').factory('listService', listService);

    function listService($q, $http) {

        var contactList;

        var getContactList = function() {
            return $q(function(resolve, reject) {

                // var response = {"results":[{"gender":"male","name":{"title":"mr","first":"ryan","last":"bishop"},"location":{"street":"7782 forest ln","city":"launceston","state":"victoria","postcode":8742},"email":"ryan.bishop@example.com","login":{"username":"heavycat940","password":"city","salt":"D48PASG8","md5":"b3f42831fb8a2a02b774eac7280e10c7","sha1":"6167cf216f7fc3739a56e3b6cedee2ca6b833774","sha256":"af2bd726b5a2ffd1fec5f46d498821e95ddd0e0f9c2fc0081b781031f77a5f69"},"dob":"1995-08-08 12:34:18","registered":"2015-07-26 22:58:41","phone":"04-7972-8466","cell":"0418-321-492","id":{"name":"TFN","value":"468530136"},"picture":{"large":"https://randomuser.me/api/portraits/men/10.jpg","medium":"https://randomuser.me/api/portraits/med/men/10.jpg","thumbnail":"https://randomuser.me/api/portraits/thumb/men/10.jpg"},"nat":"AU"},{"gender":"male","name":{"title":"mr","first":"akseli","last":"halonen"},"location":{"street":"6560 esplanadi","city":"kumlinge","state":"lapland","postcode":57918},"email":"akseli.halonen@example.com","login":{"username":"heavygorilla721","password":"2020","salt":"qLWLDUJp","md5":"2160883d404d57abdb11eeba0419cc76","sha1":"f51ab4f69b7c124797340e8f8afa01e9d0f15ef5","sha256":"372781b01b1167fd5124eb91f17226f4f555b8de968f849a287e8289a0d44eb8"},"dob":"1971-01-30 06:53:00","registered":"2011-01-09 03:35:03","phone":"07-318-400","cell":"046-849-44-77","id":{"name":"HETU","value":"671-533B"},"picture":{"large":"https://randomuser.me/api/portraits/men/77.jpg","medium":"https://randomuser.me/api/portraits/med/men/77.jpg","thumbnail":"https://randomuser.me/api/portraits/thumb/men/77.jpg"},"nat":"FI"},{"gender":"female","name":{"title":"mrs","first":"laura","last":"alvarez"},"location":{"street":"6467 church lane","city":"nottingham","state":"wiltshire","postcode":"NQ5 1AA"},"email":"laura.alvarez@example.com","login":{"username":"beautifulpeacock918","password":"verona","salt":"vnDR82P4","md5":"73484182ab72c41ac6f34646659096a0","sha1":"c314a302a4bdfef32039638ebcd338f50ed46068","sha256":"6b999d15c7170bebca4d46eb5291da2677d1746ef057b1d2a54e10943c7842e9"},"dob":"1946-12-17 04:09:32","registered":"2004-02-07 14:59:16","phone":"015395 88695","cell":"0771-638-940","id":{"name":"NINO","value":"WS 59 10 46 O"},"picture":{"large":"https://randomuser.me/api/portraits/women/39.jpg","medium":"https://randomuser.me/api/portraits/med/women/39.jpg","thumbnail":"https://randomuser.me/api/portraits/thumb/women/39.jpg"},"nat":"GB"},{"gender":"female","name":{"title":"ms","first":"barbiere","last":"silva"},"location":{"street":"9489 rua são joão ","city":"parintins","state":"amapá","postcode":93542},"email":"barbiere.silva@example.com","login":{"username":"organickoala538","password":"basketball","salt":"Uk9TsiXP","md5":"461080fb407efe3914a53bae701e6a87","sha1":"8cccb768055b4796e4b811a6c956da142309666c","sha256":"314cbcd19b970777b922cbd9827c2993af2925c20f25db3b3426e006de1c2775"},"dob":"1960-09-28 03:42:34","registered":"2009-04-28 05:34:59","phone":"(17) 7542-9035","cell":"(16) 5354-4088","id":{"name":"","value":null},"picture":{"large":"https://randomuser.me/api/portraits/women/34.jpg","medium":"https://randomuser.me/api/portraits/med/women/34.jpg","thumbnail":"https://randomuser.me/api/portraits/thumb/women/34.jpg"},"nat":"BR"},{"gender":"female","name":{"title":"mrs","first":"magnólia","last":"campos"},"location":{"street":"6957 rua treze ","city":"caxias do sul","state":"mato grosso do sul","postcode":78531},"email":"magnólia.campos@example.com","login":{"username":"beautifulsnake966","password":"coolman","salt":"j2JnTcmC","md5":"6668735ee60f3676763e2f5dbae9c251","sha1":"e009c7cfb621182a72620e21d10fe2a99ad59876","sha256":"782604786131cb9d00851d118d86b0714a47f117e2947ab5d4a4a5f625d50e4e"},"dob":"1969-01-24 22:14:52","registered":"2009-02-23 06:08:35","phone":"(77) 9542-5158","cell":"(39) 7771-5209","id":{"name":"","value":null},"picture":{"large":"https://randomuser.me/api/portraits/women/37.jpg","medium":"https://randomuser.me/api/portraits/med/women/37.jpg","thumbnail":"https://randomuser.me/api/portraits/thumb/women/37.jpg"},"nat":"BR"},{"gender":"female","name":{"title":"miss","first":"clara","last":"jensen"},"location":{"street":"4902 klitvej","city":"oure","state":"hovedstaden","postcode":11183},"email":"clara.jensen@example.com","login":{"username":"ticklishswan414","password":"world","salt":"8TM3HXK9","md5":"dd2049a7bc23002ad30ca6c57088b9e8","sha1":"7605a48f2a091ff1279a0ff20323c01af71c89ed","sha256":"505ddb605d3cc14aa4fd5ac44eb22585cdef0d32283d15772cf1c6116e2fb5ba"},"dob":"1955-05-24 15:57:25","registered":"2006-03-11 16:28:18","phone":"66754784","cell":"61446530","id":{"name":"CPR","value":"494768-1640"},"picture":{"large":"https://randomuser.me/api/portraits/women/19.jpg","medium":"https://randomuser.me/api/portraits/med/women/19.jpg","thumbnail":"https://randomuser.me/api/portraits/thumb/women/19.jpg"},"nat":"DK"},{"gender":"male","name":{"title":"mr","first":"isaac","last":"williams"},"location":{"street":"5509 highgate","city":"lower hutt","state":"hawke's bay","postcode":79429},"email":"isaac.williams@example.com","login":{"username":"redkoala392","password":"peanut1","salt":"jnGMqFjR","md5":"2666cd2de41c1f514339b1f02ad3f7dc","sha1":"25457be32e1fd6b64a2a252ab0af03de4e75b508","sha256":"8a9f5bae7eca48d35b35dacc7459597c20e4b9d54db9453ec49da3197af24b25"},"dob":"1980-09-26 05:01:22","registered":"2010-11-27 22:42:25","phone":"(718)-672-7925","cell":"(604)-188-0824","id":{"name":"","value":null},"picture":{"large":"https://randomuser.me/api/portraits/men/25.jpg","medium":"https://randomuser.me/api/portraits/med/men/25.jpg","thumbnail":"https://randomuser.me/api/portraits/thumb/men/25.jpg"},"nat":"NZ"},{"gender":"female","name":{"title":"ms","first":"viivi","last":"lampi"},"location":{"street":"9965 pyynikintie","city":"kemijärvi","state":"southern savonia","postcode":63068},"email":"viivi.lampi@example.com","login":{"username":"heavysnake592","password":"cherry","salt":"fCvd2EH7","md5":"db5bd5d621a57623e87f58e09532f9af","sha1":"a7254bf9a1507a367405e906902e0c503dd67401","sha256":"7af6b6ea1db77bf12f6e9829cd2205392a674ba61704161ceb73ae16a5ba2cfc"},"dob":"1991-12-26 01:17:39","registered":"2010-10-06 21:34:32","phone":"09-944-654","cell":"046-257-80-18","id":{"name":"HETU","value":"1591-690U"},"picture":{"large":"https://randomuser.me/api/portraits/women/30.jpg","medium":"https://randomuser.me/api/portraits/med/women/30.jpg","thumbnail":"https://randomuser.me/api/portraits/thumb/women/30.jpg"},"nat":"FI"},{"gender":"female","name":{"title":"ms","first":"monika","last":"döring"},"location":{"street":"9044 industriestraße","city":"pfaffenhofen a. d. ilm","state":"rheinland-pfalz","postcode":72844},"email":"monika.döring@example.com","login":{"username":"goldenswan741","password":"services","salt":"OfE0JVdW","md5":"51952c3ac8f33f7115090f8a16f15ae4","sha1":"92ebfc02e0081b492c83308269d5e1b3400a32f6","sha256":"493fe86efccb70a46f863e6c2a1d3e078ef02663b33f99b5cb0388826fe42261"},"dob":"1966-09-18 16:17:37","registered":"2004-05-07 08:07:55","phone":"0905-2125605","cell":"0171-7031774","id":{"name":"","value":null},"picture":{"large":"https://randomuser.me/api/portraits/women/59.jpg","medium":"https://randomuser.me/api/portraits/med/women/59.jpg","thumbnail":"https://randomuser.me/api/portraits/thumb/women/59.jpg"},"nat":"DE"},{"gender":"male","name":{"title":"mr","first":"ale","last":"van olphen"},"location":{"street":"1085 lijnmarkt","city":"beuningen","state":"drenthe","postcode":83833},"email":"ale.vanolphen@example.com","login":{"username":"yellowpeacock127","password":"nugget","salt":"KxJSHeDv","md5":"8a90a78083f58a3bccad746b08a274d3","sha1":"c277bcdd7b764ce83a195450df92674d8b4e46d1","sha256":"f710eefdbe756f6cd52b0a686322fcd8006c77f5cdfe53e0d799ce3863d71dbf"},"dob":"1962-02-14 12:30:41","registered":"2009-02-22 09:46:16","phone":"(900)-094-1780","cell":"(052)-681-1215","id":{"name":"BSN","value":"21884235"},"picture":{"large":"https://randomuser.me/api/portraits/men/26.jpg","medium":"https://randomuser.me/api/portraits/med/men/26.jpg","thumbnail":"https://randomuser.me/api/portraits/thumb/men/26.jpg"},"nat":"NL"},{"gender":"female","name":{"title":"ms","first":"jasmina","last":"wolter"},"location":{"street":"8938 friedhofstraße","city":"suhl","state":"hessen","postcode":66386},"email":"jasmina.wolter@example.com","login":{"username":"tinybear807","password":"victory","salt":"DCaLkSsg","md5":"f7187e0a558254bb85e341129479ee9d","sha1":"446acda05d0306f9f2da5c1bd58b3026d17fb876","sha256":"ab1ac1f5543d3cf841450c1f8d4a7be793accc6836a3aca92822f2d96476aced"},"dob":"1974-03-31 20:44:35","registered":"2011-06-05 01:16:53","phone":"0423-9229957","cell":"0175-4306955","id":{"name":"","value":null},"picture":{"large":"https://randomuser.me/api/portraits/women/23.jpg","medium":"https://randomuser.me/api/portraits/med/women/23.jpg","thumbnail":"https://randomuser.me/api/portraits/thumb/women/23.jpg"},"nat":"DE"},{"gender":"female","name":{"title":"mrs","first":"molly","last":"mckinney"},"location":{"street":"9405 cork street","city":"buncrana","state":"dublin city","postcode":26134},"email":"molly.mckinney@example.com","login":{"username":"brownwolf544","password":"girfriend","salt":"bxcABYEN","md5":"309677266022193aafab4d3c56b588f3","sha1":"877d723ff798d6c00fc3f806c119617584d81cba","sha256":"62453f1d74e7473b45f1597b919c5847f74fb8e6e3349de19c365ce6de8fdc34"},"dob":"1952-12-23 14:30:57","registered":"2007-05-17 03:17:42","phone":"021-999-2124","cell":"081-531-6164","id":{"name":"PPS","value":"6132381T"},"picture":{"large":"https://randomuser.me/api/portraits/women/87.jpg","medium":"https://randomuser.me/api/portraits/med/women/87.jpg","thumbnail":"https://randomuser.me/api/portraits/thumb/women/87.jpg"},"nat":"IE"},{"gender":"male","name":{"title":"mr","first":"carter","last":"white"},"location":{"street":"7727 glenfield road","city":"greymouth","state":"canterbury","postcode":10295},"email":"carter.white@example.com","login":{"username":"crazydog570","password":"ricky1","salt":"k5YmcLv8","md5":"2b088be5db1bcc34f785273b45e46418","sha1":"d2c2cd934635aac0cfc4bd7d78d8c27b87528ed1","sha256":"f50e815d5e4bd245a8fab9643af7cd43a8bbb3bcb4c515ee2c01212352700e59"},"dob":"1954-12-09 14:01:21","registered":"2004-07-24 17:30:10","phone":"(584)-021-4125","cell":"(062)-407-2208","id":{"name":"","value":null},"picture":{"large":"https://randomuser.me/api/portraits/men/18.jpg","medium":"https://randomuser.me/api/portraits/med/men/18.jpg","thumbnail":"https://randomuser.me/api/portraits/thumb/men/18.jpg"},"nat":"NZ"},{"gender":"male","name":{"title":"mr","first":"landon","last":"ford"},"location":{"street":"9589 mcgowen st","city":"launceston","state":"australian capital territory","postcode":3351},"email":"landon.ford@example.com","login":{"username":"ticklishmouse975","password":"tulips","salt":"OVAJCGu3","md5":"5a68b4bcfb889b9a11aaff79d4c2adab","sha1":"c8dfc769ca36de4ab6b37a3fc682c55b79325dd0","sha256":"f2ec9e9717409569fa22f1cf5d8de6b2df4f0a35e1be2dc0b4ded375cabf3c55"},"dob":"1958-04-23 00:26:38","registered":"2004-05-07 13:02:00","phone":"07-4559-1268","cell":"0429-039-531","id":{"name":"TFN","value":"576454484"},"picture":{"large":"https://randomuser.me/api/portraits/men/4.jpg","medium":"https://randomuser.me/api/portraits/med/men/4.jpg","thumbnail":"https://randomuser.me/api/portraits/thumb/men/4.jpg"},"nat":"AU"},{"gender":"male","name":{"title":"mr","first":"hamza","last":"harmelink"},"location":{"street":"3321 westerkade","city":"zeewolde","state":"gelderland","postcode":74488},"email":"hamza.harmelink@example.com","login":{"username":"greenladybug217","password":"chandler","salt":"E6ItU82w","md5":"a7e7937fbc132523ed4e3cd91c21a0ae","sha1":"8c29db976e876bddd7d71e6c4d07de7fc28e0560","sha256":"63dfadb6f2fe1fe14182b934d6bd583d9d13e469ef63c6a0b92e9bd69e86e885"},"dob":"1973-05-19 18:08:22","registered":"2006-08-24 06:44:58","phone":"(781)-723-2357","cell":"(183)-002-7106","id":{"name":"BSN","value":"68077203"},"picture":{"large":"https://randomuser.me/api/portraits/men/19.jpg","medium":"https://randomuser.me/api/portraits/med/men/19.jpg","thumbnail":"https://randomuser.me/api/portraits/thumb/men/19.jpg"},"nat":"NL"},{"gender":"male","name":{"title":"mr","first":"lucas","last":"petersen"},"location":{"street":"5765 lindevænget","city":"pandrup","state":"hovedstaden","postcode":56086},"email":"lucas.petersen@example.com","login":{"username":"orangeduck316","password":"renee","salt":"DYYZkmSQ","md5":"37f37b0e6ad29524cdc0edd4905c5dfb","sha1":"3e7cc605a6fd1acbaae54689640729dd26fb9073","sha256":"79a9fdcdc2af220562fa1a7e7fc838024b520f3339e09cea0d7c4a2125389650"},"dob":"1956-11-05 12:25:25","registered":"2012-10-16 21:47:48","phone":"22464133","cell":"29412068","id":{"name":"CPR","value":"252991-1416"},"picture":{"large":"https://randomuser.me/api/portraits/men/68.jpg","medium":"https://randomuser.me/api/portraits/med/men/68.jpg","thumbnail":"https://randomuser.me/api/portraits/thumb/men/68.jpg"},"nat":"DK"},{"gender":"male","name":{"title":"mr","first":"quinn","last":"king"},"location":{"street":"1703 elliot street","city":"christchurch","state":"bay of plenty","postcode":89618},"email":"quinn.king@example.com","login":{"username":"ticklishgoose256","password":"carpet","salt":"GwKwGe0E","md5":"863beaf1d802460b85d46321938ec801","sha1":"fe60c9cf2d03105d5b58e7dc8d1f0832e1ea60f8","sha256":"f40e08c511437762b979cd0804f27d3aa34a39135a155bbe90bf8a2972739883"},"dob":"1981-05-13 19:10:30","registered":"2009-06-04 07:41:07","phone":"(806)-815-7233","cell":"(343)-770-2870","id":{"name":"","value":null},"picture":{"large":"https://randomuser.me/api/portraits/men/4.jpg","medium":"https://randomuser.me/api/portraits/med/men/4.jpg","thumbnail":"https://randomuser.me/api/portraits/thumb/men/4.jpg"},"nat":"NZ"},{"gender":"male","name":{"title":"mr","first":"cléo","last":"riviere"},"location":{"street":"1782 rue chazière","city":"aubervilliers","state":"vosges","postcode":76115},"email":"cléo.riviere@example.com","login":{"username":"silverfish864","password":"mypass","salt":"qKHM5td7","md5":"347d2b158409d3e678f2d74e70478f6d","sha1":"b74e6b85964e86bed937ed84ff3da0f361298263","sha256":"8e70f1000f274e184cf971d213c421586eeb5ad5dd7bd1fc515f2eeb36549b0c"},"dob":"1990-05-06 23:44:04","registered":"2011-08-22 07:08:10","phone":"02-65-89-14-56","cell":"06-74-62-85-49","id":{"name":"INSEE","value":"190404049107 01"},"picture":{"large":"https://randomuser.me/api/portraits/men/20.jpg","medium":"https://randomuser.me/api/portraits/med/men/20.jpg","thumbnail":"https://randomuser.me/api/portraits/thumb/men/20.jpg"},"nat":"FR"},{"gender":"female","name":{"title":"miss","first":"christina","last":"jenkins"},"location":{"street":"3880 park lane","city":"newcastle west","state":"westmeath","postcode":27651},"email":"christina.jenkins@example.com","login":{"username":"orangeelephant373","password":"someone","salt":"vax8b3tJ","md5":"3f6122f86aefacf1e167b5067a7d0e0d","sha1":"2fb59f6b015b1fae30c1ef65f0bc02057a68bc73","sha256":"ef1498c4dc2cc831a20175ba3d8d5640ad74b19295939c2783d5d490be1404a8"},"dob":"1982-10-23 11:45:23","registered":"2015-03-09 07:04:20","phone":"041-609-6251","cell":"081-503-2439","id":{"name":"PPS","value":"8011877T"},"picture":{"large":"https://randomuser.me/api/portraits/women/91.jpg","medium":"https://randomuser.me/api/portraits/med/women/91.jpg","thumbnail":"https://randomuser.me/api/portraits/thumb/women/91.jpg"},"nat":"IE"},{"gender":"female","name":{"title":"miss","first":"sophie","last":"riley"},"location":{"street":"3930 mockingbird hill","city":"augusta","state":"south dakota","postcode":55348},"email":"sophie.riley@example.com","login":{"username":"organicmouse160","password":"turkey50","salt":"JIVhfoMK","md5":"8fb0dd1980b4b3df446192ca2a13415f","sha1":"209b15c2cf565cb59e16a561c8ea134ea89d751d","sha256":"e2c1bd726f02e23839e830d61e03942f2bfcf711d0801022fa48d6bb40b449ea"},"dob":"1950-12-26 11:50:34","registered":"2008-07-24 01:02:58","phone":"(806)-687-1959","cell":"(807)-483-4325","id":{"name":"SSN","value":"087-05-9038"},"picture":{"large":"https://randomuser.me/api/portraits/women/60.jpg","medium":"https://randomuser.me/api/portraits/med/women/60.jpg","thumbnail":"https://randomuser.me/api/portraits/thumb/women/60.jpg"},"nat":"US"}],"info":{"seed":"2d6b3c31faeac6bf","results":20,"page":1,"version":"1.1"}};
                //
                // contactList = response.results;
                // resolve(contactList);

                if(contactList) {
                    resolve(contactList);
                } else {
                    $http({
                        method: 'GET',
                        url: 'https://randomuser.me/api/?results=20'
                    }).then(function successCallback(response) {
                        contactList = response.data.results;
                        resolve(contactList);
                    }, function errorCallback(response) {
                        reject(response);
                    });
                }

            });

        };

        return {
            getContactList: getContactList
        };

    }

})();